<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaWeb-NG | MarkDown Notes</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="&#39;stylesheet" href="/Note/styles/website.css">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/Note/assets/css/0.styles.c3b168f2.css" as="style"><link rel="preload" href="/Note/assets/js/app.b6552d26.js" as="script"><link rel="preload" href="/Note/assets/js/4.2b697d40.js" as="script"><link rel="preload" href="/Note/assets/js/8.b0be26c6.js" as="script"><link rel="preload" href="/Note/assets/js/23.0023338d.js" as="script"><link rel="prefetch" href="/Note/assets/js/10.50666f41.js"><link rel="prefetch" href="/Note/assets/js/11.87d680aa.js"><link rel="prefetch" href="/Note/assets/js/12.da6e4d4e.js"><link rel="prefetch" href="/Note/assets/js/13.f82136dc.js"><link rel="prefetch" href="/Note/assets/js/14.9907f4f3.js"><link rel="prefetch" href="/Note/assets/js/15.92f6dbd4.js"><link rel="prefetch" href="/Note/assets/js/16.c5cf2b29.js"><link rel="prefetch" href="/Note/assets/js/17.72914458.js"><link rel="prefetch" href="/Note/assets/js/18.2406caff.js"><link rel="prefetch" href="/Note/assets/js/19.e7d173e3.js"><link rel="prefetch" href="/Note/assets/js/2.50e6b61b.js"><link rel="prefetch" href="/Note/assets/js/20.26cba237.js"><link rel="prefetch" href="/Note/assets/js/21.dfc740fa.js"><link rel="prefetch" href="/Note/assets/js/22.8c1658c3.js"><link rel="prefetch" href="/Note/assets/js/24.5ec7ff33.js"><link rel="prefetch" href="/Note/assets/js/25.001c1017.js"><link rel="prefetch" href="/Note/assets/js/26.1b9c7927.js"><link rel="prefetch" href="/Note/assets/js/27.7a385e63.js"><link rel="prefetch" href="/Note/assets/js/28.776ba31d.js"><link rel="prefetch" href="/Note/assets/js/29.13bfd433.js"><link rel="prefetch" href="/Note/assets/js/3.df7570b9.js"><link rel="prefetch" href="/Note/assets/js/30.99a0e55e.js"><link rel="prefetch" href="/Note/assets/js/31.48940396.js"><link rel="prefetch" href="/Note/assets/js/32.808af0e2.js"><link rel="prefetch" href="/Note/assets/js/33.e528e978.js"><link rel="prefetch" href="/Note/assets/js/34.5aeb012e.js"><link rel="prefetch" href="/Note/assets/js/35.7afe6923.js"><link rel="prefetch" href="/Note/assets/js/36.13aa8087.js"><link rel="prefetch" href="/Note/assets/js/37.8efc3ddb.js"><link rel="prefetch" href="/Note/assets/js/38.7aaf0bfb.js"><link rel="prefetch" href="/Note/assets/js/39.bbf72ddb.js"><link rel="prefetch" href="/Note/assets/js/40.cb26c3d1.js"><link rel="prefetch" href="/Note/assets/js/41.eec68caf.js"><link rel="prefetch" href="/Note/assets/js/42.df2fe233.js"><link rel="prefetch" href="/Note/assets/js/43.d100cbfb.js"><link rel="prefetch" href="/Note/assets/js/44.822db8df.js"><link rel="prefetch" href="/Note/assets/js/45.63504b20.js"><link rel="prefetch" href="/Note/assets/js/46.bbdaeb57.js"><link rel="prefetch" href="/Note/assets/js/47.d72205ca.js"><link rel="prefetch" href="/Note/assets/js/48.26b29247.js"><link rel="prefetch" href="/Note/assets/js/49.a26bf249.js"><link rel="prefetch" href="/Note/assets/js/5.e0c1361b.js"><link rel="prefetch" href="/Note/assets/js/6.2458b01f.js"><link rel="prefetch" href="/Note/assets/js/7.4637a892.js"><link rel="prefetch" href="/Note/assets/js/9.019195ed.js">
    <link rel="stylesheet" href="/Note/assets/css/0.styles.c3b168f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Note/" class="home-link router-link-active"><!----> <span class="site-name">MarkDown Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Note/Navigate.html" class="nav-link">
  导航页
</a></div><div class="nav-item"><a href="/Note/exam/examtime.html" class="nav-link">
  课程与考试
</a></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/chengziqaq/Note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Note/Navigate.html" class="nav-link">
  导航页
</a></div><div class="nav-item"><a href="/Note/exam/examtime.html" class="nav-link">
  课程与考试
</a></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/chengziqaq/Note" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/Note/Navigate.html" class="sidebar-link">导航</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>后端</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Django</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>JavaWeb</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html" aria-current="page" class="active sidebar-link">JavaWeb-NG</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#参考" class="sidebar-link">参考</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#问题" class="sidebar-link">问题</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#经验总结" class="sidebar-link">经验总结</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#第一周课-tomcat" class="sidebar-link">第一周课  Tomcat</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#第二周课-后端" class="sidebar-link">第二周课 后端</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#作业-1-笔记-登录案例" class="sidebar-link">作业 1 笔记：登录案例</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#第三周课-servlet" class="sidebar-link">第三周课 Servlet</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#第四周课-jsp" class="sidebar-link">第四周课 JSP</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#第五周课-filter" class="sidebar-link">第五周课 Filter</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#第六周课-ajax" class="sidebar-link">第六周课 AJAX</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#作业-2-笔记-filter-实现权限管理" class="sidebar-link">作业 2 笔记：Filter 实现权限管理</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#第七周课-jquery-和-json" class="sidebar-link">第七周课 jQuery 和 JSON</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#作业-3-笔记-ajax-登录注册" class="sidebar-link">作业 3 笔记 Ajax 登录注册</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#项目开发流程介绍" class="sidebar-link">项目开发流程介绍</a></li><li class="sidebar-sub-header"><a href="/Note/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.html#作业-4" class="sidebar-link">作业 4：</a></li></ul></li><li><a href="/Note/cs/backend/JavaWeb/KsJavaWeb/JavaWeb入门到实战.html" class="sidebar-link">JavaWeb-KS</a></li></ul></section></li><li><a href="/Note/cs/backend/SpringBoot/SpringBoot.html" class="sidebar-link">Spring Boot</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Python</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>C</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机专业课</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>大三上</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>桌面应用开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>学习方法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络安全</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-succinct-content content__default"><h1 id="javaweb-ng"><a href="#javaweb-ng" class="header-anchor">#</a> JavaWeb-NG</h1> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ul><li><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1265112034799552" target="_blank" rel="noopener noreferrer">使用List<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://my.oschina.net/u/4287266/blog/3891785" target="_blank" rel="noopener noreferrer">JavaWeb 返回json数据的两种方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <h3 id="作业2"><a href="#作业2" class="header-anchor">#</a> 作业2</h3> <ul><li><p>后端代码写了但是从来没有连接数据库使用。</p></li> <li><p><s>DAO 返回数据 <code>List&lt;Download&gt;</code> 不知道怎么使用。</s></p></li></ul> <h2 id="经验总结"><a href="#经验总结" class="header-anchor">#</a> 经验总结</h2> <h3 id="java-后端代码"><a href="#java-后端代码" class="header-anchor">#</a> Java 后端代码</h3> <ul><li><p>什么时候写一个新的函数或者方法</p> <p>大量重复用到的代码，比如作业 1 2 3  用到的 error.jsp 转发重定向，可以将错误信息和跳转到的地址作为参数使用</p></li> <li><p>什么时候用静态方法</p> <p>当方法比较独立，不容易抽象出一个类的时候。不用类初始化之类的？</p></li> <li><p>方法、类 参数 命名规则</p></li></ul> <h3 id="数据库"><a href="#数据库" class="header-anchor">#</a> 数据库</h3> <h3 id="css"><a href="#css" class="header-anchor">#</a> CSS</h3> <h3 id="javascript"><a href="#javascript" class="header-anchor">#</a> JavaScript</h3> <h2 id="第一周课-tomcat"><a href="#第一周课-tomcat" class="header-anchor">#</a> 第一周课  Tomcat</h2> <h3 id="部署方式"><a href="#部署方式" class="header-anchor">#</a> 部署方式</h3> <p>三种</p> <ol><li></li> <li></li> <li></li></ol> <h3 id="项目文件存放目录"><a href="#项目文件存放目录" class="header-anchor">#</a> 项目文件存放目录</h3> <h4 id="前端"><a href="#前端" class="header-anchor">#</a> 前端</h4> <ul><li><p>静态文件:</p> <p>html 根目录</p> <ul><li><p>js/</p></li> <li><p>css/</p></li> <li><p>image/</p></li></ul></li> <li><p>动态文件:</p> <p>*.jsp</p></li></ul> <h4 id="后端"><a href="#后端" class="header-anchor">#</a> 后端</h4> <p>均放于 WEB-INF 目录下</p> <p>WEB-INF</p> <p>classes: 按源代码的结构编译好的*.class 文件</p> <p>lib: 存放程序所需要的包(*.jar)</p> <p>web.xml: 本应用配置文件</p> <h3 id="idea-web-项目创建"><a href="#idea-web-项目创建" class="header-anchor">#</a> idea web 项目创建</h3> <p>out.flush: 立即输出, 不用等待缓存完毕就输出</p> <h3 id="配置文件解析"><a href="#配置文件解析" class="header-anchor">#</a> 配置文件解析</h3> <h3 id="web-xml"><a href="#web-xml" class="header-anchor">#</a> web.xml</h3> <h3 id="问题-2"><a href="#问题-2" class="header-anchor">#</a> 问题</h3> <ol><li>三种 web 服务器配置方法(主要用第三种方法)</li> <li>idea 生成的文件太少, 以及怎么在 idea 上配置开发环境</li> <li>配置文件的作用</li></ol> <h3 id="作业"><a href="#作业" class="header-anchor">#</a> 作业</h3> <ol><li>重现一次访问</li> <li>DAO 数据库写好</li> <li></li></ol> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>配置文件:</p> <p>web.xml 中的</p> <servelet-mapping></servelet-mapping> <h3 id="servelet"><a href="#servelet" class="header-anchor">#</a> servelet</h3> <p>教材 P19</p> <h3 id="html"><a href="#html" class="header-anchor">#</a> html</h3> <ol><li><p>p 标签自动换行</p></li> <li><p>span 不换行换行</p></li> <li><p>列表</p> <p>无序<ul></ul></p> <p>有序<ol></ol></p></li> <li><p>表格</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="http-方法"><a href="#http-方法" class="header-anchor">#</a> HTTP 方法</h3> <p>GET: 不安全 有长度限制</p> <p>POST:</p> <p>POST 请求时, 客户端发送非西文数据时使用编码: iso 8859-1</p> <p>服务端需要将此编码转换为 UTF-8 编码.</p> <p>转换方法:</p> <p>两种方法搭配使用</p> <ol><li><p>调用 request 对象提供的方法</p> <div class="language-java extra-class"><pre class="language-java"><code>request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>手工编码 可对单个数据编码进行转换</p></li></ol> <h2 id="第二周课-后端"><a href="#第二周课-后端" class="header-anchor">#</a> 第二周课 后端</h2> <h3 id="地址映射"><a href="#地址映射" class="header-anchor">#</a> 地址映射</h3> <ol><li><p>注解</p> <p>例子</p> <p>在类名前加入注解 @WebServlet(&quot;/test&quot;)</p> <p>redeploy 服务器</p> <p>访问 http://localhost:8080/javaweb_02_servlet_war/test</p> <p><strong>注意</strong>:</p> <ul><li><p>注解中 @WebServlet(&quot;/test&quot;)</p> <p>test 前面的斜杠不能忘记, 否则 tomcat 会启动失败. 上课时困扰了我至少 20 分钟</p></li></ul></li> <li><p>配置文件</p></li></ol> <h3 id="用户登录案例"><a href="#用户登录案例" class="header-anchor">#</a> 用户登录案例</h3> <ul><li>用户名 密码 验证码</li></ul> <h3 id="出错"><a href="#出错" class="header-anchor">#</a> 出错</h3> <h4 id="url-地址写错"><a href="#url-地址写错" class="header-anchor">#</a> url 地址写错</h4> <p>正确写法:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">&quot;/controller/vcode.do&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateVerifyCodeImagesServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//        System.out.println(&quot;验证码&quot;);</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>出错原因, urlPatterns 参数要以 &quot;/&quot; 开头.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 错误写法</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">&quot;controller/vcode.do&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//正确写法</span>
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">&quot;/controller/vcode.do&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="作业-1-笔记-登录案例"><a href="#作业-1-笔记-登录案例" class="header-anchor">#</a> 作业 1 笔记：登录案例</h2> <h3 id="_4-2-虚拟目录的配置"><a href="#_4-2-虚拟目录的配置" class="header-anchor">#</a> 4.2 虚拟目录的配置</h3> <p>定义: 建立 URL 地址与项目的物理路径之间的映射，这个过程叫做虚拟路径的映射。</p> <p>例如：在浏览器中输入地址 <a href="http://localhost:8080/test/index.html" target="_blank" rel="noopener noreferrer">http://localhost:8080/test/index.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>服务器必须知道/test（虚拟目录）这个目录对应服务器中的哪个物理目录</p> <p>有三种方法, 方法 3 用的多, 主要看它.</p> <h3 id="配置方法-3"><a href="#配置方法-3" class="header-anchor">#</a> 配置方法 3</h3> <p>在 $Tomcat_home$\conf\Catalina\localhost 路径下新建一个 XML 文件（conf 目录下如果没有对应子目录，请手工新建），注意：XML 文件的名字必须和定义的虚拟目录名一致，在下例中，文件名必须为 test.xml，文件内容如下:</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/test<span class="token punctuation">&quot;</span></span> <span class="token attr-name">docBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/Volumes/WinMacCode/IdeaProjects/javaweb/javaweb-02-servlet/src/main/webapp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">reloadable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Context</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>浏览器中输入 http://127.0.0.1:8080/test/index.html 也可访问到 d:/myweb/index.html 文件</p> <p>推荐使用第三种配置方法，对于该种配置方法，web 应用程序可以存放在服务器的任何位置，每个应用一个单独的配置文件。</p> <p>注意</p> <ol><li>test 为虚拟目录</li> <li>xml 配置文件的 docBase 是静态文件 html css js 的目录(docBase 目录需要改为你自己的静态文件夹目录)</li> <li>reloadable 表示热部署. 文件发生改变 tomcat 自动重启</li></ol> <h3 id="idea-maven-新建项目"><a href="#idea-maven-新建项目" class="header-anchor">#</a> IDEA Maven 新建项目</h3> <p>参考</p> <ol><li><p><a href="https://www.bilibili.com/video/BV12J411M7Sj?p=60" target="_blank" rel="noopener noreferrer">javaweb-06：IDEA 中 Maven 的操作<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p><a href="https://blog.csdn.net/m0_46587577/article/details/107290521" target="_blank" rel="noopener noreferrer">IDEA 2020 创建 Maven web 项目<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ol> <p><img src="/Note/assets/img/image-20200920105823124.b9c105cf.png" alt="image-20200920105823124"></p> <p>输入项目名称, 然后一路下一步, 等待 maven 运行完成</p> <p>因为我想在一个文件夹下能有多个项目. 需要做以下操作.</p> <ol><li><p>删除 src 目录</p> <p>删除后目录结构</p> <p><img src="/Note/assets/img/image-20200920110242782.f7e7e926.png" alt="image-20200920110242782"></p></li> <li><p>左键点击项目名称--&gt; 右键单击 --&gt; new --&gt; module</p> <p><img src="/Note/assets/img/image-20200920110447308.28528f98.png" alt="image-20200920110447308"></p> <p>进行和开始新建项目同样的操作</p></li></ol> <p><img src="/Note/assets/img/image-20200920110636065.8c694d45.png" alt="image-20200920110636065"></p> <p>这里项目名我填入为 web01servlet, 然后一路默认下一步, 再次等待 maven 跑完</p> <p><img src="/Note/assets/img/image-20200920110732006.c32a952d.png" alt="image-20200920110732006"></p> <ol start="3"><li><p>添加 tomcat 服务器配置</p> <p>参考 <a href="https://blog.csdn.net/fengchao2016/article/details/83023725" target="_blank" rel="noopener noreferrer">IDEA 集成 Tomcat <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>当静态文件改变和 java 代码改变后 需要 restart server</p> <p><s>当 java 文件改变后 需要 redeploy</s></p></li></ol> <p><img src="/Note/assets/img/image-20200920115915632.a9e29361.png" alt="image-20200920115915632"></p> <ol start="4"><li><p>在 src 下 新建 目录 java 和 resources</p> <p><img src="/Note/assets/img/image-20200920120416840.4fec8482.png" alt="image-20200920120416840"></p></li> <li><p>在 maven 中添加 servlet 依赖.</p> <p>打开子项目里的 pom.xml 粘贴以下内容到 dependencies 下级去, 然后点击 maven 图标 下载依赖包</p> <div class="language-xml extra-class"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>javax.servlet-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.servlet.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jsp-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <h3 id="以下内容是用-maven-的父结构-未完成-待补充"><a href="#以下内容是用-maven-的父结构-未完成-待补充" class="header-anchor">#</a> 以下内容是用 maven 的父结构 未完成 待补充</h3> <p><img src="/Note/assets/img/image-20200920123351849.9cafa0f8.png" alt="image-20200920123351849"></p> <p><img src="/Note/assets/img/image-20200920120758891.91680fca.png" alt="image-20200920120758891"></p> <ol start="6"><li>上课时跟着老师敲了一部分代码. 现在跟着文档完善一下.</li></ol> <p>然后启动服务器.</p> <hr> <p>9.21 晚上补充</p> <h3 id="验证码动态生成"><a href="#验证码动态生成" class="header-anchor">#</a> 验证码动态生成</h3> <p>照着老师的文档的代码敲了一遍</p> <p>生成验证码的代码完成.</p> <p>需要自己看的有 java 怎么绘画验证码.</p> <p>有一个地方需要修改.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//CreateVerifyImageController中</span>
resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;image/jpeg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//老师的代码 中 img = image 基本问题也不大, 但是用谷歌浏览器打开网址, 他会当做文件来下载, 强迫症犯了..通过一个我经常用的网站看到 返回类型该改为image/jepg</span>
</code></pre></div><p>验证码放于 session 中</p> <p>在 github 找了个前端注册登录代码 改了一下 效果如下, 修改了 js 代码 点击图片刷新验证码也行了</p> <p>还需要修改 css 使得验证码和输入框位于同一个行内</p> <p><img src="/Note/assets/img/image-20200922000326487.bf2b2d65.png" alt="image-20200922000326487"></p> <h3 id="登录出错页面"><a href="#登录出错页面" class="header-anchor">#</a> 登录出错页面</h3> <p><a href="https://github.com/HttpErrorPages/HttpErrorPages/tree/master/dist" target="_blank" rel="noopener noreferrer">出错前端模板<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>html 文件名字有大写的 tomcat 不能查看 显示 404?</p> <p>后来又行了? 令人迷惑.</p> <p>可能是缓存问题, 但是我也 restart server 并且 redeploy</p> <p>又来了更迷惑的事情.</p> <p>同一个文件夹下</p> <p>HTTP500.html 不能访问</p> <p>HTTP404.html 可以访问</p> <h3 id="el-表达式不显示"><a href="#el-表达式不显示" class="header-anchor">#</a> el 表达式不显示</h3> <p>需要在 jsp 文件前面加入以下代码</p> <p>参考: <a href="https://blog.csdn.net/lianzhang861/article/details/81232351" target="_blank" rel="noopener noreferrer">EL 表达式无法显示，直接显示${xxx}<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%@ page isELIgnored=&quot;false&quot; %&gt;
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/controller/login.do&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;login.do&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> login_info <span class="token operator">=</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">;</span>
        req<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;login_info&quot;</span><span class="token punctuation">,</span> login_info<span class="token punctuation">)</span><span class="token punctuation">;</span>
        req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/error.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%@ page language=&quot;java&quot; pageEncoding=&quot;UTF-8&quot; %&gt;
&lt;%@ page isELIgnored=&quot;false&quot; %&gt;
&lt;!DOCTYPE HTML&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;JSP显示Servlet&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    ${login_info}
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><h3 id="访问网址错误导致-jstl-和-el-数据不显示"><a href="#访问网址错误导致-jstl-和-el-数据不显示" class="header-anchor">#</a> 访问网址错误导致 jstl 和 el 数据不显示</h3> <p>正确的访问网址为</p> <p>/getDownloadList.do</p> <p>但是我在测试的时候直接访问的 /download.jsp 是不正确的</p> <p>servlet 需要传数据给 jsp 文件, 若直接访问 jsp 文件, 没有这个过程,没数据传入,则没有显示.</p> <p>只有访问 /getDownloadList.do 才能使得 jsp 文件得到数据</p> <h2 id="第三周课-servlet"><a href="#第三周课-servlet" class="header-anchor">#</a> 第三周课 Servlet</h2> <h3 id="mvc-模型"><a href="#mvc-模型" class="header-anchor">#</a> MVC 模型</h3> <ul><li><p>Model 模型</p> <p>数据库相关 JavaBean</p></li> <li><p>View 视图</p></li> <li><p>Controller 控制器</p></li></ul> <p>和 Django 的 MVC 一样</p> <p>Model 和数据库相关</p> <p>View 响应和数据处理</p> <h3 id="servlet"><a href="#servlet" class="header-anchor">#</a> Servlet</h3> <p>中间层</p> <h4 id="servlet-方法"><a href="#servlet-方法" class="header-anchor">#</a> servlet 方法</h4> <p>各种方法需要的参数以及返回值可以看源码或者教材</p> <ol><li><p>init</p> <p>首次启动调用.</p></li> <li><p>destroy</p> <p>卸载时调用.</p></li> <li><p>service</p> <p>顾名思义 服务是一直运行着的</p> <ul><li><p>doPost</p></li> <li><p>doGet</p></li></ul></li></ol> <h4 id="新建-servlet"><a href="#新建-servlet" class="header-anchor">#</a> 新建 servlet</h4> <p>参考 <a href="https://blog.csdn.net/chang_ge/article/details/79917956" target="_blank" rel="noopener noreferrer">使用 IntelliJ IDEA 新建一个 Servlet 项目<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="两种-url-映射方法"><a href="#两种-url-映射方法" class="header-anchor">#</a> 两种 URL 映射方法</h3> <p>参考</p> <p><a href="https://blog.csdn.net/yhao2014/article/details/45740111" target="_blank" rel="noopener noreferrer">Intellij idea 创建 javaWeb 以及 Servlet 简单实现<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li><p>web.xml 配置文件</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--  注册HelloServlet开始--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--    类名--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>controller.HelloServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--  servlet请求路径--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--    虚拟路径--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--  注册HelloServlet结束--&gt;</span>
</code></pre></div></li></ol> <ol start="2"><li><p>注解</p> <p>在 类名 上注解</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/HelloServlet&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;HelloServlet&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
<span class="token comment">//        ServletOutputStream outputStream = resp.getOutputStream();</span>
        <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//响应流</span>
        writer<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello servlet changed&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span>  <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token function">doGet</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <p>两者选一个就行, 注解用得多些</p> <h3 id="httpservletrequest-对象"><a href="#httpservletrequest-对象" class="header-anchor">#</a> HttpServletRequest 对象</h3> <h3 id="获得客户机请求头"><a href="#获得客户机请求头" class="header-anchor">#</a> <strong>获得客户机请求头</strong></h3> <h3 id="获得客户机请求参数"><a href="#获得客户机请求参数" class="header-anchor">#</a> 获得客户机请求参数</h3> <h2 id="第四周课-jsp"><a href="#第四周课-jsp" class="header-anchor">#</a> 第四周课 JSP</h2> <ul><li>前端页面网址 没有斜杠开头 后端却是以斜杠开头(web.xml 配置文件 和 类名上的注解 )</li></ul> <h3 id="jsp-java-server-page"><a href="#jsp-java-server-page" class="header-anchor">#</a> JSP (Java Server Page)</h3> <p>动态页面, html 文件里嵌入 Java 代码</p> <h3 id="语法格式"><a href="#语法格式" class="header-anchor">#</a> 语法格式</h3> <p>&lt;%@ 指令名 attribute1=&quot;value1&quot; %&gt;</p> <p>教材 P49</p> <p>和 Django 的模板语言类似</p> <p>服务器可以返回 基本数据类型 对象 集合等</p> <p>jstl uri 在包内没找到</p> <p>解决</p> <p><a href="https://blog.csdn.net/qq_29227939/article/details/52063869" target="_blank" rel="noopener noreferrer">配置 Jstl 的 Maven 依赖<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>但是这个 maven 配置直接复制过来 有 Maven 依赖重复问题</p> <p>使用 fo 循环</p> <p>body 中</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>forEach</span> <span class="token attr-name">items</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${downloadList}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">var</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>download<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${download.image}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>${download.description}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">c:</span>forEach</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>jsp 里最好别写代码. 多数用来数据展示。</p> <h3 id="流程控制"><a href="#流程控制" class="header-anchor">#</a> 流程控制</h3> <p>(不推荐用 JSP 做流程控制)</p> <p>必须要写 Java 代码, 后期可以使用 过滤器 简化</p> <p>若用到了 Java 中的 类 需要在头文件 import 该类</p> <h3 id="数据库-2"><a href="#数据库-2" class="header-anchor">#</a> 数据库</h3> <p><a href="https://www.cnblogs.com/dadian/p/11938707.html" target="_blank" rel="noopener noreferrer">IDEA Maven mysql 数据库操作 有 java 代码例子<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>没安装数据库.</p> <p>代码位于 src/main/java/DAO/UserDAO.java 中</p> <h2 id="第五周课-filter"><a href="#第五周课-filter" class="header-anchor">#</a> 第五周课 Filter</h2> <h3 id="过滤器"><a href="#过滤器" class="header-anchor">#</a> 过滤器</h3> <p>访问控制, 拦截请求, 对请求重新编码和压缩响应信息等</p> <h3 id="filter-配置"><a href="#filter-配置" class="header-anchor">#</a> filter 配置</h3> <ul><li><p>web.xml 配置</p> <p>filter 和 filter-mapping 标记</p> <p>支持通配符</p></li> <li><p>注解</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPattterns <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;@&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>可加入初始化参数</p></li></ul> <p>注意: 过滤器过滤的路径不包括前端静态文件(即对 html css js 无效). 对 jsp 有效</p> <ul><li><p>过滤器使用</p></li> <li><p>为了减少硬编码, 可以使用配置文件, 但是和注解比较起来, 较麻烦.</p></li></ul> <h2 id="第六周课-ajax"><a href="#第六周课-ajax" class="header-anchor">#</a> 第六周课 AJAX</h2> <h3 id="json"><a href="#json" class="header-anchor">#</a> JSON</h3> <ol><li>JSON内部包含的字符串必须要用双引号。</li> <li>JSON 数组 JSON 对象</li></ol> <p>合格的 JSON 对象</p> <p>数组 对象 以及他们的嵌套。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">{</span> <span class="token property">&quot;one&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token property">&quot;two&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token property">&quot;three&quot;</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">&quot;names&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">}</span> <span class="token punctuation">]</span>　
</code></pre></div><h2 id="作业-2-笔记-filter-实现权限管理"><a href="#作业-2-笔记-filter-实现权限管理" class="header-anchor">#</a> 作业 2 笔记：Filter 实现权限管理</h2> <h3 id="_1-web-xml-配置文件报错"><a href="#_1-web-xml-配置文件报错" class="header-anchor">#</a> 1. web.xml 配置文件报错</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">web-app</span> <span class="token name">PUBLIC</span>
 <span class="token string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span>
 <span class="token string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> <span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>display-name</span><span class="token punctuation">&gt;</span></span>Archetype Created Web Application<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>display-name</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- 定义Filter --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Filter的名字 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>permissionCheckFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Filter的实现类 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>filter.PermissionFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 下面3个init-param元素配置了3个参数 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>notCheckPath<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>/createberifyImage.do, /login.do, /logout.do, /error.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 定义Filter拦截的URL地址 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Filter的名字 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>permissionCheckFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Filter负责拦截的URL --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>*.do<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>错误: The content of element type &quot;filter-mapping&quot; must match</p> <p>解决:</p> <p><a href="https://www.iteye.com/blog/jyao-1263650" target="_blank" rel="noopener noreferrer">解决：The content of element type &quot;web-app&quot; must match &quot;(icon?,display-<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>接着 测试 过滤器效果, 发现打开 login.html 404</p> <p>删除了 target 文件 重新启动解决了 原因未知</p> <p><img src="/Note/assets/img/image-20201011185615328.44d1011d.png" alt="image-20201011185615328"></p> <h3 id="_2-验证码不加载"><a href="#_2-验证码不加载" class="header-anchor">#</a> 2. 验证码不加载</h3> <p>不过滤的地址配置错误 由于我自己的创建验证码的地址和老师给的参考代码不一样.</p> <p>修改之后启动还是不能加载. 查看后发现前端地址有问题</p> <p>后端地址注解</p> <div class="language- extra-class"><pre class="language-text"><code>/createVerifyImage.do
</code></pre></div><p>前端</p> <div class="language- extra-class"><pre class="language-text"><code>createVerifyImage.do
</code></pre></div><p>前端不能加 &quot;/&quot; 否则会变为绝对路径, 而后端却必须要加, 不然启动服务器会出错.</p> <p>接着点击验证码切换新的 又不能加载.</p> <p>原因: Javascript 代码没修改.</p> <p>修改 js 代码后还是出错</p> <p>又是前端相对路径前面不能 加 &quot; / &quot;</p> <h4 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结</h4> <ol><li>前端相对路径开头不能有 &quot;/&quot;, 后端路径注解必须有</li> <li>项目开始写代码之前, 路径这些得先确定下来, 开发过程中修改费时间还容易出问题.</li></ol> <h3 id="cookie-和-session"><a href="#cookie-和-session" class="header-anchor">#</a> Cookie 和 Session</h3> <ol><li>只要注意 cookie的 path 加上项目名就行</li> <li>广告的精确推送使用 cookie 以前没想到过</li></ol> <h4 id="session-和-cookie-记住用户登录状态"><a href="#session-和-cookie-记住用户登录状态" class="header-anchor">#</a> session 和 cookie 记住用户登录状态</h4> <p>用户登录状态在服务端记录才安全. Cookie 用于记住用户名,</p> <p>是否登录( 次要, 最终还要在服务端用 session 验证一次 ).</p> <p>参考:</p> <p><a href="https://blog.csdn.net/huanyinghanlang/article/details/79061802" target="_blank" rel="noopener noreferrer">java利用Session实现三天免登录<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>主要看这: 勾选了记住我 submit 传过来得数值为 1 .</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> remember <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;remember&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>remember <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> remember<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 需要记住密码</span>
				<span class="token comment">// 将用户名和密码存放在cookie对象中</span>
				<span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo&quot;</span><span class="token punctuation">,</span> uname <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> pwd<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// 设置有效时间三天</span>
				cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// 设置有效页面</span>
				cookie<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span><span class="token string">&quot;/uwo9/login.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// 将cookie对象存放至response</span>
				resp<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="读取-cookie"><a href="#读取-cookie" class="header-anchor">#</a> 读取 cookie</h4> <p>需要先进行类型转换再得到 cookie</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">HttpServletRequest</span> request <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> req<span class="token punctuation">;</span>
<span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>同理, 设置 cookie 需要</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">HttpServletResponse</span>  response<span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">)</span> resp<span class="token punctuation">;</span>
</code></pre></div><p>字符串分割取 cookie 里面的用户名和密码</p> <p>参考:</p> <p><a href="https://blog.csdn.net/qq_39668217/article/details/87733608?utm_medium=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-BlogCommendFromMachineLearnPai2-1.channel_param" target="_blank" rel="noopener noreferrer">JAVA删除Cookie<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://www.runoob.com/java/java-string-split.html" target="_blank" rel="noopener noreferrer">Java split() 方法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="权限分配实现"><a href="#权限分配实现" class="header-anchor">#</a> 权限分配实现</h3> <ul><li><p>问题</p> <ul><li><p>后端怎么判断有没有某个权限。</p> <p><s>每个权限分开判断？判断一次查询一次数据库？</s></p> <p>查询出所有权限，从查询结果判断有没有当前访问资源的权限。（性能低一些，但是现在这个阶段不用考虑性能问题，以后可以放在缓存中）</p></li></ul></li></ul> <p>这个难点在于数据库的设计和下面的 sql 语句, 不过老师给了数据库设计结构. 多对多结构</p> <p>查询当前登录用户所属的角色，然后查询这些角色拥有权限的资源信息, .</p> <div class="language-mysql extra-class"><pre class="language-text"><code>SELECT
	*
FROM
	t_resource
WHERE
	resourceId IN (
		SELECT
			resourceId
		FROM
			t_role_resource
		WHERE
			roleId IN (
				SELECT
					roleId
				FROM
					t_user_role
				WHERE
					userName = ?
			)
	)
</code></pre></div><p>上面这 sql 语句</p> <p>先看最上面 查询结果是 t_resource 表中的所有信息。</p> <p>再看 最后一句：通过用户名查询。</p> <p>再看中间：通过用户名查询用户属于哪个角色。管理员还是用户等</p> <p>合起来：通过用户名查询这个用户拥有权限的所有资源信息。</p> <p>如果某个资源没有权限，则查询不到。</p> <p>判断指定的资源（代码实现中我使用的 resourceName 判断，感觉需要改进）在不在查询结果中完成权限判断。</p> <p>看了之前的代码，发现查询结果返回类写错了。原因是 sql 语句没看懂。</p> <p>改好了之后，发现 List&lt;&gt; 用法不会，谷歌一下，之后再考虑 permittionFilter 之后怎么重定向，传什么数据，感觉好像哪里不对。突然想起 filter 是中间过程，过滤通过后需要调用 chain.dofilter。之前对 filter 的工作原理理解错误：忘了 filter 是中间过程，之前错误的将它直接当成 servlet 来使用</p> <div class="language-java extra-class"><pre class="language-java"><code>chain<span class="token punctuation">.</span><span class="token function">dofilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span>
</code></pre></div><p><s>并将页面重定向封装为一个方法</s></p> <p>也就两三行，感觉封装没必要（或者因为我封装得太差了？）</p> <h2 id="第七周课-jquery-和-json"><a href="#第七周课-jquery-和-json" class="header-anchor">#</a> 第七周课 jQuery 和 JSON</h2> <h3 id="json-2"><a href="#json-2" class="header-anchor">#</a> JSON</h3> <ul><li><p>JSON.parse(): 用于将一个 JSON 字符串转换为 JavaScript 对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'{&quot;name&quot;:&quot;alex&quot;}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'{name:&quot;alex&quot;}'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>    <span class="token comment">// 错误 name 需要加双引号</span>
</code></pre></div></li> <li><p>JSON.stringify(): 用于将 JavaScript 值转换为 JSON 字符串。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> jsonStr<span class="token operator">=</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;alex&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="jquery"><a href="#jquery" class="header-anchor">#</a> jQuery</h3> <h4 id="属性获取"><a href="#属性获取" class="header-anchor">#</a> 属性获取</h4> <p>表单：val</p> <p>其他：html text</p> <h4 id="css-选择器"><a href="#css-选择器" class="header-anchor">#</a> css 选择器</h4> <p>用的 css 选择器较多</p> <h4 id="属性选择器"><a href="#属性选择器" class="header-anchor">#</a> 属性选择器</h4> <h4 id="基本过滤选择器"><a href="#基本过滤选择器" class="header-anchor">#</a> 基本过滤选择器</h4> <p>:first</p> <p>:last</p> <p>:even</p> <p>:odd</p> <h4 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h4> <p>ajax 方法例子</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#b1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
        username<span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        password<span class="token operator">:</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token string">&quot;login.do&quot;</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> data<span class="token punctuation">,</span>
        dataType<span class="token operator">:</span> <span class="token string">&quot;JSON&quot;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot; internet error&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="查询例子"><a href="#查询例子" class="header-anchor">#</a> 查询例子</h4> <p>组合查询 某些支持模糊查询</p> <h2 id="作业-3-笔记-ajax-登录注册"><a href="#作业-3-笔记-ajax-登录注册" class="header-anchor">#</a> 作业 3 笔记 Ajax 登录注册</h2> <p><s>登录用原生 Javascript 和 XMLHttpRequest 完成</s></p> <p>登录注册都用 jQuery 和 Ajax 完成，原生 Javascript 太难用了。</p> <h3 id="第一步-修改-javascript-代码"><a href="#第一步-修改-javascript-代码" class="header-anchor">#</a> 第一步 修改 Javascript 代码</h3> <ol><li><p>首先参考老师的代码将 Javascript 代码修改成了函数调用的。</p></li> <li><p>需要写后端返回 JSON 数据的接口。</p> <p>参考：[<a href="https://my.oschina.net/u/4287266/blog/3891785" target="_blank" rel="noopener noreferrer">JavaWeb 返回json数据的两种方式<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>](https://my.oschina.net/u/4287266/blog/3891785)</p> <p>文章中提到的第一种方法 找不到 JSONObject，所以用第二种。</p> <div class="language-java extra-class"><pre class="language-java"><code>login_info <span class="token operator">=</span> <span class="token string">&quot;登录成功&quot;</span><span class="token punctuation">;</span>
resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=utf-8;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token string">&quot; {\&quot;code\&quot;: 0,\&quot;info\&quot;: \&quot;&quot;</span> <span class="token operator">+</span> login_info <span class="token operator">+</span> <span class="token string">&quot;\&quot;}&quot;</span><span class="token punctuation">;</span>
resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>需要用转义字符 \ 转义 引号。</p> <div class="language-json extra-class"><pre class="language-json"><code>String result = <span class="token string">&quot; {\&quot;code\&quot;: 1,\&quot;info\&quot;: \&quot;&quot;</span> + login_info + <span class="token string">&quot;\&quot;}&quot;</span>;
</code></pre></div><p>改好后，先测试第一个，出错。需要修改过滤器配置文件。</p> <p>将 ajaxLoginCheck.do 加入不需要访问权限的。还是 404 .</p> <p>发现是前端传过来的参数不对。后端需要的是 userName， 我传来的是 email，修改又有 500 （服务器内部错误）问题。数据库连接出了问题（我根本没开数据库），后面找个空闲时间再安排好数据库。</p> <p>把查询数据库的操作改为了自己手动新建一个 User 对象，然后测试，</p> <p>一直出现验证码错误。。原来又是前端传的 验证码 变量名称和后端的不一样。</p> <p>终于改好了</p> <p>谨记：前后端传的参数一定要协商好，前后端传送的参数不要随便修改，不然后期测试容易懵逼而且替换起来真的难受。</p></li></ol> <h2 id="项目开发流程介绍"><a href="#项目开发流程介绍" class="header-anchor">#</a> 项目开发流程介绍</h2> <ol><li><p>需求分析</p></li> <li><p>设计</p> <ul><li><p>前端</p> <ul><li><p>布局</p> <ul><li><p>html div container span</p> <ul><li><p>表格</p> <ul><li><p>thead 标题</p> <p>不用 tr 方便选择</p></li> <li><p>tfoot 页脚</p> <p>同上</p></li></ul></li> <li><p>浮动</p> <p>左右浮动</p></li></ul></li> <li><p>任何元素都能做按钮，通过 css 设置美化</p></li></ul></li> <li><p>样式</p> <ul><li>渐变色</li> <li>bootstrap</li> <li>阿里巴巴图标素材 alifont</li></ul></li> <li><p>框架</p> <ul><li>bootstrap</li> <li>vue 的 elementUI</li></ul></li></ul></li> <li><p>后端</p> <ul><li>Controller DAO</li></ul></li> <li><p>交互</p> <ul><li><p>人机交互</p></li> <li><p>交互数据的封装</p> <p>前端请求后端数据返回的接口设计</p> <ul><li><p>page分页查询参数</p> <p>? 开头的查询参数</p> <p>JSON 数据需要用输入输出流才能接收</p></li> <li><p>服务器返回</p> <ul><li><p>记录条数 当前为第几页</p> <p>总之：就是看前端要什么数据，后端返回什么数据。</p></li></ul></li></ul></li></ul></li></ul></li> <li><p>实现</p> <p>注重设计，设计好了写代码就是简单的事情了。</p></li> <li><p>测试</p></li> <li><p>部署</p></li> <li><p>维护</p></li> <li><p>持续集成</p></li></ol> <h2 id="作业-4"><a href="#作业-4" class="header-anchor">#</a> 作业 4：</h2> <h3 id="页面设计"><a href="#页面设计" class="header-anchor">#</a> 页面设计</h3> <p>尽量不出现滚动条</p> <p>表格导航栏固定</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/chengziqaq/Note/edit/master/cs/backend/JavaWeb/JavaWebNg/JavaWeb_ng.md" target="_blank" rel="noopener noreferrer"> Edit on Github </a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/15/2020, 2:00:42 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ⟵
      <a href="/Note/cs/backend/Django/Django.html" class="prev">
        Django 官方文档快速入门教程
      </a></span> <span class="next"><a href="/Note/cs/backend/JavaWeb/KsJavaWeb/JavaWeb入门到实战.html">
        JavaWeb-KS
      </a>
      ⟶
    </span></p></div> </main></div><div class="global-ui"><div style="visibility:hidden;display:none;"></div><!----></div></div>
    <script src="/Note/assets/js/app.b6552d26.js" defer></script><script src="/Note/assets/js/4.2b697d40.js" defer></script><script src="/Note/assets/js/8.b0be26c6.js" defer></script><script src="/Note/assets/js/23.0023338d.js" defer></script>
  </body>
</html>

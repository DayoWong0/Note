(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{863:function(t,s,a){"use strict";a.r(s);var n=a(18),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"blog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#blog"}},[t._v("#")]),t._v(" Blog")]),t._v(" "),a("h2",{attrs:{id:"_1-安装-node-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装-node-js"}},[t._v("#")]),t._v(" 1. 安装 node.js")]),t._v(" "),a("h2",{attrs:{id:"_2-gitpages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-gitpages"}},[t._v("#")]),t._v(" 2. Gitpages")]),t._v(" "),a("p",[t._v("fork 仓库 https://github.com/Tsanfer/vuepress_theme_reco-Github_Actions")]),t._v(" "),a("p",[t._v("我将仓库重命名为了 blog")]),t._v(" "),a("p",[t._v("下载仓库到本地")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/DayoWong0/blog\n")])])]),a("hr"),t._v(" "),a("p",[t._v("docs/.vuepress/config.js 中加上这一句")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("  base"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" '/blog/'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("hr"),t._v(" "),a("p",[t._v("生成静态文件")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run docs:build\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 进入生成的文件夹")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docs/.vuepress/dist\n")])])]),a("p",[t._v("推送到 gh-pages 分支去")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -A\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n")])])]),a("hr"),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push -f git@github.com:DayoWong0/blog.git master:gh-pages\n")])])]),a("p",[t._v("等待一会，打开 https://dayowong0.github.io/blog/ 成功。")]),t._v(" "),a("p",[t._v("再根据自己的需求参考官方文档修改 config.js 配置文件。")]),t._v(" "),a("h2",{attrs:{id:"_3-自动部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-自动部署"}},[t._v("#")]),t._v(" 3. 自动部署")]),t._v(" "),a("p",[t._v("根目录下新建 .travis.yml")]),t._v(" "),a("p",[t._v("内容")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" lts/*\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("install")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm install "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm ci")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm run docs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("build "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm run docs:build")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("provider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" pages\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("skip_cleanup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("local_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" docs/.vuepress/dist\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("github_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $GITHUB_TOKEN "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在 GitHub 中生成，用于允许 Travis 向你的仓库推送代码。在 Travis 的项目设置页面进行配置，设置为 secure variable")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("keep_history")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#这里指的是部署前的源文件分支")]),t._v("\n\n")])])]),a("p",[t._v("配置 travis token")]),t._v(" "),a("p",[t._v("删除 GitAction 相关配置-- 删除 .github 文件夹")]),t._v(" "),a("p",[t._v("Github 推送不上去，网络错误。换了几个节点 终于可以了")]),t._v(" "),a("p",[t._v("看 Travis 构建日志，构建成功，推送错误，看了提示，大概意思是：网页文件没变化，不用推送。")]),t._v(" "),a("p",[t._v("改变一下 md 内容，再推送试试。删除一篇文章试试，可以的。")]),t._v(" "),a("h4",{attrs:{id:"文章书写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文章书写"}},[t._v("#")]),t._v(" 文章书写")]),t._v(" "),a("div",{staticClass:"language-markdown extra-class"},[a("pre",{pre:!0,attrs:{class:"language-markdown"}},[a("code",[a("span",{pre:!0,attrs:{class:"token hr punctuation"}},[t._v("---")]),t._v('\ntitle: vuepress-theme-reco + Github Actions 搭建静态博客，自动构建部署到第三方服务器\ndate: 2020-03-21\nsidebar: "auto"\ncategories:\n  '),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" 前端\ntags:\n  "),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" VuePress\n  "),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" Github\n  "),a("span",{pre:!0,attrs:{class:"token list punctuation"}},[t._v("-")]),t._v(" 博客\n  "),a("span",{pre:!0,attrs:{class:"token title important"}},[t._v("- 持续集成\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token title important"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("##")]),t._v(" 正文")]),t._v("\n")])])]),a("p",[t._v("顾名思义 标题 标签等 完成。")]),t._v(" "),a("h4",{attrs:{id:"删除与之前仓库相关的信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除与之前仓库相关的信息"}},[t._v("#")]),t._v(" 删除与之前仓库相关的信息")]),t._v(" "),a("p",[t._v("算了 不搞了 麻烦 没必要")])])}),[],!1,null,null,null);s.default=e.exports}}]);
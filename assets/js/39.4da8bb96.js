(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{840:function(t,a,s){"use strict";s.r(a);var n=s(18),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"django-官方文档快速入门教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#django-官方文档快速入门教程"}},[t._v("#")]),t._v(" Django 官方文档快速入门教程")]),t._v(" "),s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),s("p",[t._v("建议先看 [官方文档]快速入门: 编写你的第一个 Django 应用")]),t._v(" "),s("p",[t._v("熟悉 django 开发基本步骤")]),t._v(" "),s("p",[t._v("再查看 Django 官方文档(完整版)")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.djangoproject.com/zh-hans/3.1/contents/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Django 官方文档(完整版)"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.djangoproject.com/zh-hans/3.1/intro/tutorial01/",target:"_blank",rel:"noopener noreferrer"}},[t._v("[官方文档]快速入门: 编写你的第一个 Django 应用"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.bilibili.com/video/BV1Tx411d7E7",target:"_blank",rel:"noopener noreferrer"}},[t._v("Django 视频"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/chengziqaq/Note/tree/master/docs/cs/backend/Django/django%E6%A1%86%E6%9E%B6_%E8%A7%86%E9%A2%91%E6%96%87%E6%A1%A3.docx",target:"_blank",rel:"noopener noreferrer"}},[t._v("django 框架_视频文档.docx"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/chengziqaq/Django",target:"_blank",rel:"noopener noreferrer"}},[t._v("之前的学习笔记"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"django-介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#django-介绍"}},[t._v("#")]),t._v(" Django 介绍")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Django",target:"_blank",rel:"noopener noreferrer"}},[t._v("维基百科介绍"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://zh.wikipedia.org/wiki/Web%E5%BA%94%E7%94%A8%E6%A1%86%E6%9E%B6",target:"_blank",rel:"noopener noreferrer"}},[t._v("扩展阅读: Web 应用框架"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"项目规划"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目规划"}},[t._v("#")]),t._v(" 项目规划")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("项目规划")])]),t._v(" "),s("li",[s("p",[t._v("测试数据")])])]),t._v(" "),s("h2",{attrs:{id:"编写你的第一个-django-应用-第-5-部分-测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写你的第一个-django-应用-第-5-部分-测试"}},[t._v("#")]),t._v(" 编写你的第一个 Django 应用，第 5 部分: 测试")]),t._v(" "),s("p",[t._v("https://docs.djangoproject.com/zh-hans/3.1/intro/tutorial05/#writing-our-first-test")]),t._v(" "),s("ul",[s("li",[t._v("shell 里测试")]),t._v(" "),s("li",[t._v("编写测试代码")])]),t._v(" "),s("h3",{attrs:{id:"如果你对测试有个整体规划-那么它们就几乎不会变得混乱。下面有几条好的建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如果你对测试有个整体规划-那么它们就几乎不会变得混乱。下面有几条好的建议"}},[t._v("#")]),t._v(" 如果你对测试有个整体规划，那么它们就几乎不会变得混乱。下面有几条好的建议：")]),t._v(" "),s("ul",[s("li",[t._v("对于每个模型和视图都建立单独的 "),s("code",[t._v("TestClass")])]),t._v(" "),s("li",[t._v("每个测试方法只测试一个功能")]),t._v(" "),s("li",[t._v("给每个测试方法起个能描述其功能的名字")])]),t._v(" "),s("h2",{attrs:{id:"注释"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注释"}},[t._v("#")]),t._v(" 注释")]),t._v(" "),s("p",[t._v("三个双引号")]),t._v(" "),s("h2",{attrs:{id:"编写你的第一个-django-应用-第-6-部分-静态文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写你的第一个-django-应用-第-6-部分-静态文件"}},[t._v("#")]),t._v(" 编写你的第一个 Django 应用，第 6 部分: 静态文件")]),t._v(" "),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v("警告\nThe")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("% static %"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" template tag is not available for use in static files which aren't generated by Django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" like your stylesheet. You should always use relative paths to link your static files between each other"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" because then you can change STATIC_URL "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("used by the static template tag to generate its URLs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" without having to modify a bunch of paths in your static files as well.\n")])])]),s("p",[t._v("上面警告的一个例子:")]),t._v(" "),s("ul",[s("li",[t._v("例子中的 css 中引入背景图片需要用相对路径, 这个背景图片不是由 Django 生成,不能使用{% static %}引用")])]),t._v(" "),s("h2",{attrs:{id:"编写你的第一个-django-应用-第-7-部分-自定义后台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写你的第一个-django-应用-第-7-部分-自定义后台"}},[t._v("#")]),t._v(" 编写你的第一个 Django 应用，第 7 部分: 自定义后台")]),t._v(" "),s("h2",{attrs:{id:"进阶指南-如何编写可重用程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进阶指南-如何编写可重用程序"}},[t._v("#")]),t._v(" 进阶指南：如何编写可重用程序")]),t._v(" "),s("h1",{attrs:{id:"详细文档学习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#详细文档学习"}},[t._v("#")]),t._v(" 详细文档学习")]),t._v(" "),s("h2",{attrs:{id:"开始项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始项目"}},[t._v("#")]),t._v(" 开始项目")]),t._v(" "),s("h3",{attrs:{id:"新建项目和-app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新建项目和-app"}},[t._v("#")]),t._v(" 新建项目和 app")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("django-admin startproject 项目名称\n")])])]),s("p",[t._v("这里我的项目名称为 learning")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("python manage.py startapp app名称\n")])])]),s("p",[t._v("这里我的 app 名称为 app1")]),t._v(" "),s("h3",{attrs:{id:"配置-mysql-数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-mysql-数据库"}},[t._v("#")]),t._v(" 配置 mysql 数据库")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("安装 mysql")])]),t._v(" "),s("li",[s("p",[t._v("创建数据库(django 不会自动创建数据库 需要手动创建)")]),t._v(" "),s("p",[t._v("我创建的 数据库名字 为 django_learning, 后面要填入到配置文件中")])]),t._v(" "),s("li",[s("p",[t._v("安装 pymysql")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("python3 -m pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" PyMySQL\n")])])]),s("ul",[s("li",[s("p",[t._v("由于 django 官方貌似不支持 pymysql,但是有其他办法用 pymysql(且 mysqldb 安装失败)")])]),t._v(" "),s("li",[s("p",[t._v("setting.py 中")]),t._v(" "),s("p",[t._v("来源: "),s("a",{attrs:{href:"https://adamj.eu/tech/2020/02/04/how-to-use-pymysql-with-django/",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to use PyMySQL with Django"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" pymysql\n\nDATABASES "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ENGINE'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'django.db.backends.mysql'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NAME'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库名字'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'USER'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库用户名'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PASSWORD'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库密码'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HOST'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql数据库服务器ip地址'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PORT'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql端口'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Fake PyMySQL's version and install as MySQLdb")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://adamj.eu/tech/2020/02/04/how-to-use-pymysql-with-django/")]),t._v("\npymysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("version_info "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"final"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\npymysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("install_as_MySQLdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("测试")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("进入django命令行"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\npython manage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py shell\n运行下面两个命令"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MySQLdb\nMySQLdb\n\n输出信息"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("module "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pymysql'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/.../site-packages/pymysql/__init__.py'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])])])]),t._v(" "),s("li",[s("p",[t._v("注册项目到 Django setting 文件中.")])]),t._v(" "),s("li",[s("p",[t._v("增加下面这句到 INSTALLED_APPS, 其中 app1 替换为自己的 app 名字,")]),t._v(" "),s("p",[t._v("也就是")]),t._v(" "),s("p",[t._v("python manage.py startapp app 名称 这里面的 app 名称")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app1.apps.App1Config'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("p",[t._v("修改后看起来是这样的")]),t._v(" "),s("div",{staticClass:"language-tex extra-class"},[s("pre",{pre:!0,attrs:{class:"language-tex"}},[s("code",[t._v("INSTALLED_APPS = "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'app1.apps.App1Config',\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("编写 app1/models.py 文件测试")]),t._v(" "),s("p",[t._v("这是 Django 官方教程里的一个例子")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" models\n")])])])])]),t._v(" "),s("p",[t._v("class Question(models.Model):\nquestion_text = models.CharField(max_length=200)\npub_date = models.DateTimeField('date published')")]),t._v(" "),s("p",[t._v("class Choice(models.Model):\nquestion = models.ForeignKey(Question, on_delete=models.CASCADE)\nchoice_text = models.CharField(max_length=200)\nvotes = models.IntegerField(default=0)")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\n* 命令行操作, 执行数据库相关的操作:\n\n必须先执行第一句,生成数据库迁移文件\n\n第二句是应用到数据库.\n\n第一句只是在本地生成数据库相关的 py 文件\n\n第二句才操作数据库\n\n- 第一句\n\n```python\npython manage.py makemigrations\n")])])]),s("ul",[s("li",[s("p",[t._v("第二句")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("python manage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py migrate\n")])])])]),t._v(" "),s("li",[s("p",[t._v("执行后可以查看 app1/migrations/0001_initial.py 这个文件, 如下")])])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Generated by Django 3.1 on 2020-08-07 13:42")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" migrations"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" models\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deletion\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Migration")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("migrations"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Migration"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n    initial "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n\n    dependencies "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n    operations "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        migrations"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CreateModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Question'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            fields"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AutoField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("auto_created"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primary_key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" serialize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" verbose_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ID'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'question_text'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pub_date'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DateTimeField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("verbose_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'date published'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        migrations"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CreateModel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Choice'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            fields"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AutoField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("auto_created"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" primary_key"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" serialize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" verbose_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ID'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'choice_text'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CharField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("max_length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'votes'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IntegerField"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("default"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'question'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ForeignKey"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("on_delete"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("django"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("models"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deletion"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CASCADE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'app1.question'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n")])])]),s("ul",[s("li",[s("p",[t._v("可以对照数据库查看表结构, 我用的 sequel pro 2(mac 软件)")]),t._v(" "),s("p",[t._v("可以看到有 app1"),s("em",[t._v("choice 和 app1_question 还有其他 django 系统用到的数据库. 可以看出是 models.py 中的 应用名称")]),t._v("类名")]),t._v(" "),s("p",[t._v("变量名为数据表里的列名, 所以很直观 models.py 是定义数据库相关的")]),t._v(" "),s("p",[t._v("进一步可以查看表结构")])])]),t._v(" "),s("p",[t._v("接下来就可以看模型和数据库试试")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("所需 python 包记录")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("pip freeze "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" requirements"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("txt\n")])])])])]),t._v(" "),s("h2",{attrs:{id:"模型和数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模型和数据库"}},[t._v("#")]),t._v(" 模型和数据库")]),t._v(" "),s("h3",{attrs:{id:"模型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模型"}},[t._v("#")]),t._v(" 模型")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("一般来说，每一个模型都映射一张数据库表。")])]),t._v(" "),s("li",[s("p",[t._v("每个模型都是一个 Python 的类，这些类继承 "),s("a",{attrs:{href:"https://docs.djangoproject.com/zh-hans/3.1/ref/models/instances/#django.db.models.Model",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("django.db.models.Model")]),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("模型类的每个属性都相当于一个数据库的字段。")])]),t._v(" "),s("li",[s("p",[t._v("利用这些，Django 提供了一个自动生成访问数据库的 API；请参阅 "),s("a",{attrs:{href:"https://docs.djangoproject.com/zh-hans/3.1/topics/db/queries/",target:"_blank",rel:"noopener noreferrer"}},[t._v("执行查询"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("li",[s("p",[t._v("一个 "),s("code",[t._v("id")]),t._v(" 字段会被自动添加，但是这种行为可以被改写。请参阅 "),s("a",{attrs:{href:"https://docs.djangoproject.com/zh-hans/3.1/topics/db/models/#automatic-primary-key-fields",target:"_blank",rel:"noopener noreferrer"}},[t._v("自动设置主键"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("li",[s("p",[t._v("当你向 "),s("a",{attrs:{href:"https://docs.djangoproject.com/zh-hans/3.1/ref/settings/#std:setting-INSTALLED_APPS",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("INSTALLED_APPS")]),s("OutboundLink")],1),t._v(" 添加新的应用的时候，请务必运行 "),s("a",{attrs:{href:"https://docs.djangoproject.com/zh-hans/3.1/ref/django-admin/#django-admin-migrate",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("manage.py migrate")]),s("OutboundLink")],1),t._v("，此外你也可以先使用以下命令进行迁移 "),s("a",{attrs:{href:"https://docs.djangoproject.com/zh-hans/3.1/ref/django-admin/#django-admin-makemigrations",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("manage.py makemigrations")]),s("OutboundLink")],1),t._v("。")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);